module.exports=[25569,a=>{"use strict";var b=a.i(69426),c=a.i(35843),d=a.i(79515),e=a.i(51335),f=a.i(8186),g=a.i(43192);let h=g.z.object({password:g.z.string().regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z\d]).{8,}$/,"Password must be 8+ chars, include uppercase, lowercase, number, and special char."),confirmPassword:g.z.string()}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function i(){let a=(0,d.useParams)(),g=(0,d.useRouter)(),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),{register:s,handleSubmit:t,formState:{errors:u}}=(0,e.useForm)({resolver:(0,f.zodResolver)(h)});(0,c.useEffect)(()=>{let b=async()=>{try{(await fetch(`/api/v1/auth/signup-tokens/${a.token}`)).ok?j(!0):(j(!1),p("Invalid or expired signup link."))}catch(a){j(!1),p("Failed to validate link.")}finally{l(!1)}};a.token&&b()},[a.token]);let v=async b=>{n(!0),p(null);try{let c=await fetch("/api/v1/auth/signup/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a.token,password:b.password})}),d=await c.json();if(!c.ok)throw Error(d.error||"Signup failed");r(!0),setTimeout(()=>{g.push("/login")},3e3)}catch(a){p(a.message)}finally{n(!1)}};return k?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Validating Key..."})]})}):i?q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full text-center",children:[(0,b.jsx)("div",{className:"text-green-500 text-5xl mb-4",children:"✅"}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Signup Complete"}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:["Your password has been set. Your account is now ",(0,b.jsx)("strong",{children:"PENDING APPROVAL"}),". You will be notified once a banker activates your access."]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to login..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,b.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Complete Account Setup"}),(0,b.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Set your secure password to activate your banking access."})]}),(0,b.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,b.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:(0,b.jsxs)("form",{className:"space-y-6",onSubmit:t(v),children:[o&&(0,b.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:(0,b.jsx)("div",{className:"flex",children:(0,b.jsx)("div",{className:"ml-3",children:(0,b.jsx)("p",{className:"text-sm text-red-700",children:o})})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)("input",{id:"password",type:"password",...s("password"),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"}),u.password&&(0,b.jsx)("p",{className:"mt-2 text-sm text-red-600",children:u.password.message})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)("input",{id:"confirmPassword",type:"password",...s("confirmPassword"),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"}),u.confirmPassword&&(0,b.jsx)("p",{className:"mt-2 text-sm text-red-600",children:u.confirmPassword.message})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:m?"Setting Password...":"Activate Account"})})]})})})]}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full text-center",children:[(0,b.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"⚠️"}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Invalid Link"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:o||"This signup link is invalid, expired, or has already been used."}),(0,b.jsx)("button",{onClick:()=>g.push("/login"),className:"text-primary-600 hover:underline",children:"Return to Login"})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_app_signup_%5Btoken%5D_page_tsx_9e6c65c7._.js.map