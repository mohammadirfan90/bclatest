module.exports=[98202,a=>{"use strict";var b=a.i(69426),c=a.i(35843),d=a.i(73608),e=a.i(91119),f=a.i(66718),g=a.i(99570),h=a.i(86304),i=a.i(59653),j=a.i(41120),k=a.i(18500),l=a.i(45653),m=a.i(36398),n=a.i(57785),o=a.i(18777),p="Switch",[q,r]=(0,k.createContextScope)(p),[s,t]=q(p),u=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:h,required:k,disabled:m,value:n="on",onCheckedChange:q,form:r,...t}=a,[u,v]=c.useState(null),w=(0,j.useComposedRefs)(d,a=>v(a)),z=c.useRef(!1),A=!u||r||!!u.closest("form"),[B,C]=(0,l.useControllableState)({prop:g,defaultProp:h??!1,onChange:q,caller:p});return(0,b.jsxs)(s,{scope:e,checked:B,disabled:m,children:[(0,b.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":k,"data-state":y(B),"data-disabled":m?"":void 0,disabled:m,value:n,...t,ref:w,onClick:(0,i.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(x,{control:u,bubbles:!z.current,name:f,value:n,checked:B,required:k,disabled:m,form:r,style:{transform:"translateX(-100%)"}})]})});u.displayName=p;var v="SwitchThumb",w=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=t(v,d);return(0,b.jsx)(o.Primitive.span,{"data-state":y(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});w.displayName=v;var x=c.forwardRef(({__scopeSwitch:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let i=c.useRef(null),k=(0,j.useComposedRefs)(i,h),l=(0,m.usePrevious)(e),o=(0,n.useSize)(d);return c.useEffect(()=>{let a=i.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[l,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:k,style:{...g.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function y(a){return a?"checked":"unchecked"}x.displayName="SwitchBubbleInput";var z=a.i(68114);function A({className:a,...c}){return(0,b.jsx)(u,{"data-slot":"switch",className:(0,z.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(w,{"data-slot":"switch-thumb",className:(0,z.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var B=a.i(70430),C=a.i(80701),D=a.i(6015),E=a.i(90633),F=a.i(67619),G=a.i(10054),H="Collapsible",[I,J]=(0,k.createContextScope)(H),[K,L]=I(H),M=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,open:f,defaultOpen:g,disabled:h,onOpenChange:i,...j}=a,[k,m]=(0,l.useControllableState)({prop:f,defaultProp:g??!1,onChange:i,caller:H});return(0,b.jsx)(K,{scope:e,disabled:h,contentId:(0,G.useId)(),open:k,onOpenToggle:c.useCallback(()=>m(a=>!a),[m]),children:(0,b.jsx)(o.Primitive.div,{"data-state":S(k),"data-disabled":h?"":void 0,...j,ref:d})})});M.displayName=H;var N="CollapsibleTrigger",O=c.forwardRef((a,c)=>{let{__scopeCollapsible:d,...e}=a,f=L(N,d);return(0,b.jsx)(o.Primitive.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":S(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:c,onClick:(0,i.composeEventHandlers)(a.onClick,f.onOpenToggle)})});O.displayName=N;var P="CollapsibleContent",Q=c.forwardRef((a,c)=>{let{forceMount:d,...e}=a,f=L(P,a.__scopeCollapsible);return(0,b.jsx)(F.Presence,{present:d||f.open,children:({present:a})=>(0,b.jsx)(R,{...e,ref:c,present:a})})});Q.displayName=P;var R=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,present:f,children:g,...h}=a,i=L(P,e),[k,l]=c.useState(f),m=c.useRef(null),n=(0,j.useComposedRefs)(d,m),p=c.useRef(0),q=p.current,r=c.useRef(0),s=r.current,t=i.open||k,u=c.useRef(t),v=c.useRef(void 0);return c.useEffect(()=>{let a=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,E.useLayoutEffect)(()=>{let a=m.current;if(a){v.current=v.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();p.current=b.height,r.current=b.width,u.current||(a.style.transitionDuration=v.current.transitionDuration,a.style.animationName=v.current.animationName),l(f)}},[i.open,f]),(0,b.jsx)(o.Primitive.div,{"data-state":S(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!t,...h,ref:n,style:{"--radix-collapsible-content-height":q?`${q}px`:void 0,"--radix-collapsible-content-width":s?`${s}px`:void 0,...a.style},children:t&&g})});function S(a){return a?"open":"closed"}var T=a.i(20146),U=a.i(99209),V=a.i(66110),W=a.i(74549),X=a.i(17691),Y=a.i(71696),Y=Y,Z=a.i(67454),Z=Z,$=a.i(38521),_=a.i(98416),aa=a.i(57005),ab=a.i(60721);function ac(){let[a,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(),[r,s]=(0,c.useState)(),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("ALL"),[E,F]=(0,c.useState)("ALL"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!0),[N,P]=(0,c.useState)(1),[R,S]=(0,c.useState)("50"),ac=(0,c.useCallback)(()=>{let a=new URLSearchParams;return p&&a.append("from",(0,d.format)(p,"yyyy-MM-dd")),r&&a.append("to",(0,d.format)(r,"yyyy-MM-dd")),t&&a.append("amountMin",t),v&&a.append("amountMax",v),x&&"ALL"!==x&&a.append("entryType",x),E&&"ALL"!==E&&a.append("transactionType",E),G&&a.append("reference",G),I&&a.append("accountId",I),a.append("includeReversals",K.toString()),a.append("page",N.toString()),a.append("size",R),a},[p,r,t,v,x,E,G,I,K,N,R]),ad=(0,c.useCallback)(async()=>{m(!0);try{let a=ac(),b=await (0,ab.apiClient)(`/transactions/search?${a.toString()}`);b.success&&b.data&&(i(b.data),k(b.meta||null))}catch(a){console.error("Search failed:",a)}finally{m(!1)}},[ac]);(0,c.useEffect)(()=>{ad()},[N,R]);let ae=async()=>{try{let a=ac();a.append("export","csv");let b=await fetch(`/api/v1/transactions/search?${a.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){let a=await b.blob(),c=window.URL.createObjectURL(a),e=document.createElement("a");e.href=c,e.download=`transactions_${(0,d.format)(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(c),document.body.removeChild(e)}}catch(a){console.error("Export failed:",a)}},af=a=>new Intl.NumberFormat("en-BD",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a),ag=[p,r,t,v,"ALL"!==x?x:null,"ALL"!==E?E:null,G,I,!K].filter(Boolean).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Transaction Search"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"Advanced search across all ledger entries"})]}),(0,b.jsxs)(g.Button,{onClick:ae,variant:"outline",className:"gap-2",children:[(0,b.jsx)(W.Download,{className:"h-4 w-4"}),"Export CSV"]})]}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(M,{open:n,onOpenChange:o,children:[(0,b.jsx)(O,{asChild:!0,children:(0,b.jsx)(e.CardHeader,{className:"pb-3 cursor-pointer hover:bg-slate-50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(e.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)($.Filter,{className:"h-4 w-4"}),"Search Filters",ag>0&&(0,b.jsxs)(h.Badge,{variant:"secondary",className:"ml-2",children:[ag," active"]})]}),n?(0,b.jsx)(Z.default,{className:"h-4 w-4 text-slate-500"}):(0,b.jsx)(Y.default,{className:"h-4 w-4 text-slate-500"})]})})}),(0,b.jsx)(Q,{children:(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),P(1),ad()},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"From Date"}),(0,b.jsxs)(U.Popover,{children:[(0,b.jsx)(U.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:(0,z.cn)("w-full justify-start text-left font-normal",!p&&"text-muted-foreground"),children:[(0,b.jsx)(V.CalendarIcon,{className:"mr-2 h-4 w-4"}),p?(0,d.format)(p,"PPP"):"Select date"]})}),(0,b.jsx)(U.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(T.Calendar,{mode:"single",selected:p,onSelect:q,initialFocus:!0})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"To Date"}),(0,b.jsxs)(U.Popover,{children:[(0,b.jsx)(U.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:(0,z.cn)("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[(0,b.jsx)(V.CalendarIcon,{className:"mr-2 h-4 w-4"}),r?(0,d.format)(r,"PPP"):"Select date"]})}),(0,b.jsx)(U.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(T.Calendar,{mode:"single",selected:r,onSelect:s,initialFocus:!0})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"Min Amount"}),(0,b.jsx)(f.Input,{type:"number",placeholder:"0.00",value:t,onChange:a=>u(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"Max Amount"}),(0,b.jsx)(f.Input,{type:"number",placeholder:"No limit",value:v,onChange:a=>w(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"Entry Type"}),(0,b.jsxs)(C.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(C.SelectTrigger,{children:(0,b.jsx)(C.SelectValue,{})}),(0,b.jsxs)(C.SelectContent,{children:[(0,b.jsx)(C.SelectItem,{value:"ALL",children:"All Types"}),(0,b.jsx)(C.SelectItem,{value:"DEBIT",children:"Debit Only"}),(0,b.jsx)(C.SelectItem,{value:"CREDIT",children:"Credit Only"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"Transaction Type"}),(0,b.jsxs)(C.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(C.SelectTrigger,{children:(0,b.jsx)(C.SelectValue,{})}),(0,b.jsxs)(C.SelectContent,{children:[(0,b.jsx)(C.SelectItem,{value:"ALL",children:"All Types"}),(0,b.jsx)(C.SelectItem,{value:"TRANSFER",children:"Transfer"}),(0,b.jsx)(C.SelectItem,{value:"DEPOSIT",children:"Deposit"}),(0,b.jsx)(C.SelectItem,{value:"WITHDRAWAL",children:"Withdrawal"}),(0,b.jsx)(C.SelectItem,{value:"INTEREST",children:"Interest"}),(0,b.jsx)(C.SelectItem,{value:"FEE",children:"Fee"}),(0,b.jsx)(C.SelectItem,{value:"REVERSAL",children:"Reversal"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"Reference / Description"}),(0,b.jsx)(f.Input,{placeholder:"Search...",value:G,onChange:a=>H(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(B.Label,{children:"Account ID"}),(0,b.jsx)(f.Input,{type:"number",placeholder:"e.g. 1001",value:I,onChange:a=>J(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(A,{id:"include-reversals",checked:K,onCheckedChange:L}),(0,b.jsx)(B.Label,{htmlFor:"include-reversals",children:"Include reversed transactions"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{type:"submit",className:"bg-slate-900 hover:bg-slate-800",children:[(0,b.jsx)(X.Search,{className:"mr-2 h-4 w-4"}),"Search"]}),(0,b.jsxs)(g.Button,{type:"button",variant:"outline",onClick:()=>{q(void 0),s(void 0),u(""),w(""),y("ALL"),F("ALL"),H(""),J(""),L(!0),P(1)},children:[(0,b.jsx)(_.X,{className:"mr-2 h-4 w-4"}),"Clear Filters"]}),(0,b.jsxs)(g.Button,{type:"button",variant:"ghost",onClick:ad,children:[(0,b.jsx)(aa.RefreshCw,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]})})})]})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(e.CardTitle,{className:"text-base",children:["Search Results",j&&(0,b.jsxs)("span",{className:"text-sm font-normal text-slate-500 ml-2",children:["(",j.totalItems," transactions found)"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(B.Label,{className:"text-sm text-slate-500",children:"Page Size:"}),(0,b.jsxs)(C.Select,{value:R,onValueChange:a=>{S(a),P(1)},children:[(0,b.jsx)(C.SelectTrigger,{className:"w-20",children:(0,b.jsx)(C.SelectValue,{})}),(0,b.jsxs)(C.SelectContent,{children:[(0,b.jsx)(C.SelectItem,{value:"20",children:"20"}),(0,b.jsx)(C.SelectItem,{value:"50",children:"50"}),(0,b.jsx)(C.SelectItem,{value:"100",children:"100"})]})]})]})]})}),(0,b.jsx)(e.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(D.Table,{children:[(0,b.jsx)(D.TableHeader,{children:(0,b.jsxs)(D.TableRow,{className:"bg-slate-50 hover:bg-slate-50",children:[(0,b.jsx)(D.TableHead,{className:"w-[80px]",children:"ID"}),(0,b.jsx)(D.TableHead,{children:"Date"}),(0,b.jsx)(D.TableHead,{children:"Reference"}),(0,b.jsx)(D.TableHead,{children:"Account"}),(0,b.jsx)(D.TableHead,{children:"Type"}),(0,b.jsx)(D.TableHead,{children:"Entry"}),(0,b.jsx)(D.TableHead,{className:"text-right",children:"Amount"}),(0,b.jsx)(D.TableHead,{className:"text-right",children:"Balance"}),(0,b.jsx)(D.TableHead,{children:"Description"})]})}),(0,b.jsx)(D.TableBody,{children:l?(0,b.jsx)(D.TableRow,{children:(0,b.jsx)(D.TableCell,{colSpan:9,className:"text-center py-8 text-slate-500",children:"Searching..."})}):0===a.length?(0,b.jsx)(D.TableRow,{children:(0,b.jsx)(D.TableCell,{colSpan:9,className:"text-center py-8 text-slate-500",children:"No transactions found matching your criteria."})}):a.map(a=>(0,b.jsxs)(D.TableRow,{className:a.isReversal?"bg-amber-50/50":"",children:[(0,b.jsxs)(D.TableCell,{className:"font-medium text-slate-600",children:["#",a.id]}),(0,b.jsx)(D.TableCell,{className:"text-slate-600 whitespace-nowrap",children:(0,d.format)(new Date(a.createdAt),"MMM dd, yyyy HH:mm")}),(0,b.jsx)(D.TableCell,{className:"font-mono text-xs text-slate-500",children:a.transactionReference}),(0,b.jsx)(D.TableCell,{className:"font-medium",children:a.accountNumber}),(0,b.jsxs)(D.TableCell,{children:[(0,b.jsx)(h.Badge,{variant:"outline",className:"text-xs",children:a.transactionType}),a.isReversal&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs ml-1 bg-amber-100 text-amber-700",children:"REVERSED"})]}),(0,b.jsx)(D.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"outline",className:"CREDIT"===a.entryType?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-rose-50 text-rose-700 border-rose-200",children:a.entryType})}),(0,b.jsxs)(D.TableCell,{className:`text-right font-medium ${"CREDIT"===a.entryType?"text-emerald-600":"text-rose-600"}`,children:["DEBIT"===a.entryType?"-":"+",af(a.amount)]}),(0,b.jsx)(D.TableCell,{className:"text-right font-mono text-slate-600",children:af(a.balanceAfter)}),(0,b.jsx)(D.TableCell,{className:"max-w-[200px] truncate text-slate-600",children:a.description||"-"})]},a.id))})]})})})]}),j&&j.totalPages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-slate-600",children:["Page ",j.currentPage," of ",j.totalPages]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",disabled:1===j.currentPage,onClick:()=>P(j.currentPage-1),children:"Previous"}),(0,b.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,j.totalPages)},(a,c)=>{let d;return d=j.totalPages<=5||j.currentPage<=3?c+1:j.currentPage>=j.totalPages-2?j.totalPages-4+c:j.currentPage-2+c,(0,b.jsx)(g.Button,{variant:j.currentPage===d?"default":"outline",size:"sm",className:"w-8",onClick:()=>P(d),children:d},d)})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",disabled:j.currentPage===j.totalPages,onClick:()=>P(j.currentPage+1),children:"Next"})]})]})]})}a.s(["default",()=>ac],98202)}];

//# sourceMappingURL=src_app_banker_search_page_tsx_5c78e963._.js.map