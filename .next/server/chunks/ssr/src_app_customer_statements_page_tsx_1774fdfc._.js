module.exports=[14556,a=>{"use strict";var b=a.i(69426),c=a.i(35843),d=a.i(73608),e=a.i(85206),f=a.i(38441),g=a.i(88568),h=a.i(91119),i=a.i(99570),j=a.i(80701),k=a.i(6015),l=a.i(20146),m=a.i(99209),n=a.i(66110),o=a.i(74549);let p=(0,a.i(72873).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var q=a.i(75482),r=a.i(25246),s=a.i(60721),t=a.i(68114);function u(){let[a,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)((0,f.startOfMonth)((0,e.subMonths)(new Date,1))),[z,A]=(0,c.useState)((0,g.endOfMonth)((0,e.subMonths)(new Date,1))),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1);(0,c.useEffect)(()=>{L()},[]);let L=async()=>{let a=await (0,s.apiClient)("/accounts");a.success&&a.data&&(u(a.data),a.data.length>0&&w(a.data[0].id.toString()))},M=(0,c.useCallback)(async()=>{if(v){I(!0);try{let a=new URLSearchParams({from:(0,d.format)(x,"yyyy-MM-dd"),to:(0,d.format)(z,"yyyy-MM-dd"),page:F.toString(),size:"50"}),b=await (0,s.apiClient)(`/accounts/${v}/statement?${a.toString()}`);b.success&&b.data&&(C(b.data),E(b.meta||null))}catch(a){console.error("Failed to load statement:",a)}finally{I(!1)}}},[v,x,z,F]);(0,c.useEffect)(()=>{v&&M()},[M,v]);let N=async()=>{if(v){K(!0);try{let a=(0,d.format)(x,"yyyy-MM"),b=await fetch(`/api/v1/accounts/${v}/statement/pdf?month=${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){let c=await b.blob(),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`statement_${a}.pdf`,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),document.body.removeChild(e)}}catch(a){console.error("Failed to download PDF:",a)}finally{K(!1)}}},O=a=>{let b=new Date;switch(a){case"thisMonth":y((0,f.startOfMonth)(b)),A(b);break;case"lastMonth":y((0,f.startOfMonth)((0,e.subMonths)(b,1))),A((0,g.endOfMonth)((0,e.subMonths)(b,1)));break;case"last3Months":y((0,f.startOfMonth)((0,e.subMonths)(b,3))),A(b);break;case"last6Months":y((0,f.startOfMonth)((0,e.subMonths)(b,6))),A(b);break;case"lastYear":y((0,f.startOfMonth)((0,e.subMonths)(b,12))),A(b)}G(1)},P=a=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:2}).format(a);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Account Statements"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"View your transaction history and download statements"})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{className:"pb-4",children:(0,b.jsx)(h.CardTitle,{className:"text-base",children:"Select Account & Period"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Account"}),(0,b.jsxs)(j.Select,{value:v,onValueChange:a=>{w(a),G(1)},children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select account"})}),(0,b.jsx)(j.SelectContent,{children:a.map(a=>(0,b.jsxs)(j.SelectItem,{value:a.id.toString(),children:[a.accountNumber," (",a.accountTypeName,")"]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"From Date"}),(0,b.jsxs)(m.Popover,{children:[(0,b.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",className:(0,t.cn)("w-full justify-start text-left font-normal",!x&&"text-muted-foreground"),children:[(0,b.jsx)(n.CalendarIcon,{className:"mr-2 h-4 w-4"}),x?(0,d.format)(x,"PPP"):"Pick a date"]})}),(0,b.jsx)(m.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(l.Calendar,{mode:"single",selected:x,onSelect:a=>a&&y(a),initialFocus:!0})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"To Date"}),(0,b.jsxs)(m.Popover,{children:[(0,b.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",className:(0,t.cn)("w-full justify-start text-left font-normal",!z&&"text-muted-foreground"),children:[(0,b.jsx)(n.CalendarIcon,{className:"mr-2 h-4 w-4"}),z?(0,d.format)(z,"PPP"):"Pick a date"]})}),(0,b.jsx)(m.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,b.jsx)(l.Calendar,{mode:"single",selected:z,onSelect:a=>a&&A(a),initialFocus:!0})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Â "}),(0,b.jsxs)(i.Button,{onClick:N,disabled:!v||J,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:[(0,b.jsx)(o.Download,{className:"mr-2 h-4 w-4"}),J?"Downloading...":"Download PDF"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-500 mr-2",children:"Quick Select:"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O("thisMonth"),children:"This Month"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O("lastMonth"),children:"Last Month"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O("last3Months"),children:"Last 3 Months"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O("last6Months"),children:"Last 6 Months"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O("lastYear"),children:"Last Year"})]})]})]}),B&&(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsx)(h.Card,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:(0,b.jsxs)(h.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Opening Balance"}),(0,b.jsx)("p",{className:"text-xl font-bold text-slate-900",children:P(B.openingBalance)})]})}),(0,b.jsx)(h.Card,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100",children:(0,b.jsxs)(h.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-sm text-emerald-600",children:"Total Credits"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-emerald-700",children:["+",P(B.totalCredits)]})]})}),(0,b.jsx)(h.Card,{className:"bg-gradient-to-br from-rose-50 to-rose-100",children:(0,b.jsxs)(h.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-sm text-rose-600",children:"Total Debits"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-rose-700",children:["-",P(B.totalDebits)]})]})}),(0,b.jsx)(h.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100",children:(0,b.jsxs)(h.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-sm text-blue-600",children:"Closing Balance"}),(0,b.jsx)("p",{className:"text-xl font-bold text-blue-700",children:P(B.closingBalance)})]})})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(h.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(p,{className:"h-5 w-5"}),"Transaction History"]}),B&&(0,b.jsxs)(h.CardDescription,{children:[(0,d.format)(new Date(B.period.from),"PPP")," - ",(0,d.format)(new Date(B.period.to),"PPP")]})]}),(0,b.jsx)(h.CardContent,{className:"p-0",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{className:"bg-slate-50 hover:bg-slate-50",children:[(0,b.jsx)(k.TableHead,{children:"Date"}),(0,b.jsx)(k.TableHead,{children:"Description"}),(0,b.jsx)(k.TableHead,{children:"Reference"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Debit"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Credit"}),(0,b.jsx)(k.TableHead,{className:"text-right font-semibold",children:"Balance"})]})}),(0,b.jsx)(k.TableBody,{children:H?(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:6,className:"text-center py-8 text-slate-500",children:"Loading statement..."})}):B&&0!==B.entries.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(k.TableRow,{className:"bg-slate-50/50",children:[(0,b.jsx)(k.TableCell,{className:"text-slate-600",children:(0,d.format)(new Date(B.period.from),"MMM dd, yyyy")}),(0,b.jsx)(k.TableCell,{className:"font-medium text-slate-700",colSpan:2,children:"Opening Balance"}),(0,b.jsx)(k.TableCell,{}),(0,b.jsx)(k.TableCell,{}),(0,b.jsx)(k.TableCell,{className:"text-right font-bold text-slate-900",children:P(B.openingBalance)})]}),B.entries.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{className:"text-slate-600",children:(0,d.format)(new Date(a.date),"MMM dd, yyyy")}),(0,b.jsx)(k.TableCell,{className:"text-slate-900",children:a.description||a.transactionType}),(0,b.jsx)(k.TableCell,{className:"font-mono text-xs text-slate-500",children:a.transactionReference}),(0,b.jsx)(k.TableCell,{className:"text-right text-rose-600 font-medium",children:a.debit?P(a.debit):""}),(0,b.jsx)(k.TableCell,{className:"text-right text-emerald-600 font-medium",children:a.credit?P(a.credit):""}),(0,b.jsx)(k.TableCell,{className:"text-right font-bold text-slate-900",children:P(a.runningBalance)})]},a.id)),(0,b.jsxs)(k.TableRow,{className:"bg-slate-50/50",children:[(0,b.jsx)(k.TableCell,{className:"text-slate-600",children:(0,d.format)(new Date(B.period.to),"MMM dd, yyyy")}),(0,b.jsx)(k.TableCell,{className:"font-medium text-slate-700",colSpan:2,children:"Closing Balance"}),(0,b.jsx)(k.TableCell,{}),(0,b.jsx)(k.TableCell,{}),(0,b.jsx)(k.TableCell,{className:"text-right font-bold text-blue-600",children:P(B.closingBalance)})]})]}):(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:6,className:"text-center py-8 text-slate-500",children:"No transactions found for the selected period."})})})]})})]}),D&&D.totalPages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-slate-600",children:["Showing page ",D.currentPage," of ",D.totalPages," (",D.totalItems," transactions)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",disabled:1===D.currentPage,onClick:()=>G(D.currentPage-1),children:[(0,b.jsx)(q.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",disabled:D.currentPage===D.totalPages,onClick:()=>G(D.currentPage+1),children:["Next",(0,b.jsx)(r.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})}a.s(["default",()=>u],14556)}];

//# sourceMappingURL=src_app_customer_statements_page_tsx_1774fdfc._.js.map