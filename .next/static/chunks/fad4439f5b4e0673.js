(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43992),t=e.i(4074),r=e.i(31924);function a(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("div",{"data-slot":"card",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}function i(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("div",{"data-slot":"card-header",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}function n(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("leading-none font-semibold",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("div",{"data-slot":"card-title",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}function d(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("text-muted-foreground text-sm",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("div",{"data-slot":"card-description",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}function l(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("px-6",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("div",{"data-slot":"card-content",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}function c(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("div",{"data-slot":"card-footer",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>d,"CardFooter",()=>c,"CardHeader",()=>i,"CardTitle",()=>n])},87486,e=>{"use strict";var s=e.i(43992),t=e.i(4074),r=e.i(62073),a=e.i(94237),i=e.i(31924);let n=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let a,d,l,c,o,u,x=(0,t.c)(12);x[0]!==e?({className:a,variant:c,asChild:l,...d}=e,x[0]=e,x[1]=a,x[2]=d,x[3]=l,x[4]=c):(a=x[1],d=x[2],l=x[3],c=x[4]);let m=void 0!==l&&l?r.Slot:"span";return x[5]!==a||x[6]!==c?(o=(0,i.cn)(n({variant:c}),a),x[5]=a,x[6]=c,x[7]=o):o=x[7],x[8]!==m||x[9]!==d||x[10]!==o?(u=(0,s.jsx)(m,{"data-slot":"badge",className:o,...d}),x[8]=m,x[9]=d,x[10]=o,x[11]=u):u=x[11],u}e.s(["Badge",()=>d])},24687,e=>{"use strict";var s=e.i(43992),t=e.i(4074),r=e.i(31924);function a(e){let a,i,n,d,l=(0,t.c)(8);return l[0]!==e?({className:a,...i}=e,l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]),l[3]!==a?(n=(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),l[3]=a,l[4]=n):n=l[4],l[5]!==i||l[6]!==n?(d=(0,s.jsx)("textarea",{"data-slot":"textarea",className:n,...i}),l[5]=i,l[6]=n,l[7]=d):d=l[7],d}e.s(["Textarea",()=>a])},44714,e=>{"use strict";var s=e.i(43992),t=e.i(39436),r=e.i(15288),a=e.i(19455),i=e.i(87486),n=e.i(24687);function d({item:e,onDecision:d,onClose:l}){let[c,o]=(0,t.useState)(""),[u,x]=(0,t.useState)(!1),m=async s=>{x(!0);try{await d(e.id,s,c),l()}finally{x(!1)}},h="string"==typeof e.details?JSON.parse(e.details):e.details;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)(r.Card,{className:"w-full max-w-2xl bg-white shadow-xl max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-bold",children:["Fraud Review #",e.id]}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm",children:["Created ",new Date(e.created_at).toLocaleString()]})]}),(0,s.jsxs)(i.Badge,{variant:"CRITICAL"===e.severity||"HIGH"===e.severity?"destructive":"secondary",children:[e.severity," Risk (",e.fraud_score,"/100)"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Transaction"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Amount:"})," à§³",Number(e.transaction_amount).toFixed(2)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Type:"})," ",e.transaction_type]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Tx ID:"})," ",e.transaction_id]})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Customer"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Name:"})," ",e.customer_name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"ID:"})," ",e.customer_id]})]})]})]}),(0,s.jsxs)("div",{className:"p-4 border border-red-100 bg-red-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-red-800 mb-2",children:"Risk Signals"}),(0,s.jsx)("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:h?.risks?.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"font-medium",children:e.rule}),": ",e.severity," (Score: ",e.score,")"]},t))||(0,s.jsx)("li",{children:e.rule_triggered})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Review Notes"}),(0,s.jsx)(n.Textarea,{value:c,onChange:e=>o(e.target.value),placeholder:"Enter justification for your decision...",className:"min-h-[100px]"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,s.jsx)(a.Button,{variant:"outline",className:"flex-1 border-green-600 text-green-600 hover:bg-green-50",onClick:()=>m("APPROVE"),disabled:u,children:"Approve (False Positive)"}),(0,s.jsx)(a.Button,{variant:"outline",className:"flex-1",onClick:()=>m("ESCALATE"),disabled:u,children:"Escalate"}),(0,s.jsx)(a.Button,{variant:"destructive",className:"flex-1",onClick:()=>m("BLOCK"),disabled:u,children:"Block & Freeze"})]}),(0,s.jsx)("div",{className:"flex justify-center pt-2",children:(0,s.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:l,children:"Cancel"})})]})})})}function l(){let[e,n]=(0,t.useState)([]),[l,c]=(0,t.useState)({total:0}),[o,u]=(0,t.useState)(null),[x,m]=(0,t.useState)(!0),h=async()=>{m(!0);try{let e=await fetch("/api/v1/banker/fraud/queue?status=PENDING");if(e.ok){let s=await e.json();n(s.items),c({total:s.total})}}catch(e){console.error("Failed to fetch fraud queue",e)}finally{m(!1)}};(0,t.useEffect)(()=>{h()},[]);let v=async(e,s,t)=>{try{(await fetch(`/api/v1/banker/fraud/${e}/decision`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({decision:s,notes:t})})).ok?await h():alert("Failed to submit decision")}catch(e){console.error(e),alert("Error submitting decision")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Fraud Review Queue"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:[l.total," pending transactions requiring review"]})]}),(0,s.jsx)(a.Button,{onClick:h,variant:"outline",size:"sm",children:"Refresh"})]}),(0,s.jsx)("div",{className:"grid gap-4",children:x?(0,s.jsx)("div",{className:"text-center py-10",children:"Loading queue..."}):0===e.length?(0,s.jsx)("div",{className:"text-center py-10 border rounded-lg bg-gray-50",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No pending fraud alerts. Great job! ðŸŽ‰"})}):e.map(e=>(0,s.jsx)(r.Card,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer border-l-4 border-l-transparent hover:border-l-blue-500",onClick:()=>u(e),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(i.Badge,{variant:"CRITICAL"===e.severity||"HIGH"===e.severity?"destructive":"secondary",children:[e.severity," (",e.fraud_score,")"]}),(0,s.jsxs)("span",{className:"font-medium text-lg",children:["à§³",Number(e.transaction_amount).toLocaleString()]}),(0,s.jsxs)("span",{className:"text-gray-500 text-sm",children:["from ",e.customer_name]})]}),(0,s.jsxs)("p",{className:"text-sm text-red-600 font-medium",children:["Alert: ",e.rule_triggered]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["Tx: ",e.id," â€¢ ",new Date(e.created_at).toLocaleString()]})]}),(0,s.jsx)(a.Button,{size:"sm",children:"Review"})]})},e.id))}),o&&(0,s.jsx)(d,{item:o,onDecision:v,onClose:()=>u(null)})]})}e.s(["default",()=>l],44714)}]);