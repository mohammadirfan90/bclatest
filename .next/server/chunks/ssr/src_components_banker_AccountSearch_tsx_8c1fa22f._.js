module.exports=[93360,a=>{"use strict";var b=a.i(69426),c=a.i(35843),d=a.i(80098);let e=(0,a.i(72873).default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var f=a.i(57751),g=a.i(17691),h=a.i(68114),i=a.i(99570),j=/[\\\/_+.#"@\[\(\{&]/,k=/[\\\/_+.#"@\[\(\{&]/g,l=/[\s-]/,m=/[\s-]/g;function n(a){return a.toLowerCase().replace(m," ")}var o=a.i(55284),p=a.i(16672),q=a.i(10054),r=a.i(41120),s='[cmdk-group=""]',t='[cmdk-group-items=""]',u='[cmdk-item=""]',v=`${u}:not([aria-disabled="true"])`,w="cmdk-item-select",x="data-value",y=(a,b,c)=>{var d;return d=a,function a(b,c,d,e,f,g,h){if(g===c.length)return f===b.length?1:.99;var i=`${f},${g}`;if(void 0!==h[i])return h[i];for(var n,o,p,q,r=e.charAt(g),s=d.indexOf(r,f),t=0;s>=0;)(n=a(b,c,d,e,s+1,g+1,h))>t&&(s===f?n*=1:j.test(b.charAt(s-1))?(n*=.8,(p=b.slice(f,s-1).match(k))&&f>0&&(n*=Math.pow(.999,p.length))):l.test(b.charAt(s-1))?(n*=.9,(q=b.slice(f,s-1).match(m))&&f>0&&(n*=Math.pow(.999,q.length))):(n*=.17,f>0&&(n*=Math.pow(.999,s-f))),b.charAt(s)!==c.charAt(g)&&(n*=.9999)),(n<.1&&d.charAt(s-1)===e.charAt(g+1)||e.charAt(g+1)===e.charAt(g)&&d.charAt(s-1)!==e.charAt(g))&&.1*(o=a(b,c,d,e,s+1,g+2,h))>n&&(n=.1*o),n>t&&(t=n),s=d.indexOf(r,s+1);return h[i]=t,t}(d=c&&c.length>0?`${d+" "+c.join(" ")}`:d,b,n(d),n(b),0,0,{})},z=c.createContext(void 0),A=c.createContext(void 0),B=c.createContext(void 0),C=c.forwardRef((a,b)=>{let d=M(()=>{var b,c;return{search:"",value:null!=(c=null!=(b=a.value)?b:a.defaultValue)?c:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),e=M(()=>new Set),f=M(()=>new Map),g=M(()=>new Map),h=M(()=>new Set),i=K(a),{label:j,children:k,value:l,onValueChange:m,filter:n,shouldFilter:o,loop:r,disablePointerSelection:B=!1,vimBindings:C=!0,...D}=a,E=(0,q.useId)(),F=(0,q.useId)(),G=(0,q.useId)(),H=c.useRef(null),I=P();L(()=>{if(void 0!==l){let a=l.trim();d.current.value=a,J.emit()}},[l]),L(()=>{I(6,V)},[]);let J=c.useMemo(()=>({subscribe:a=>(h.current.add(a),()=>h.current.delete(a)),snapshot:()=>d.current,setState:(a,b,c)=>{var e,f,g,h;if(!Object.is(d.current[a],b)){if(d.current[a]=b,"search"===a)U(),S(),I(1,T);else if("value"===a){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let a=document.getElementById(G);a?a.focus():null==(e=document.getElementById(E))||e.focus()}if(I(7,()=>{var a;d.current.selectedItemId=null==(a=W())?void 0:a.id,J.emit()}),c||I(5,V),(null==(f=i.current)?void 0:f.value)!==void 0){null==(h=(g=i.current).onValueChange)||h.call(g,null!=b?b:"");return}}J.emit()}},emit:()=>{h.current.forEach(a=>a())}}),[]),N=c.useMemo(()=>({value:(a,b,c)=>{var e;b!==(null==(e=g.current.get(a))?void 0:e.value)&&(g.current.set(a,{value:b,keywords:c}),d.current.filtered.items.set(a,O(b,c)),I(2,()=>{S(),J.emit()}))},item:(a,b)=>(e.current.add(a),b&&(f.current.has(b)?f.current.get(b).add(a):f.current.set(b,new Set([a]))),I(3,()=>{U(),S(),d.current.value||T(),J.emit()}),()=>{g.current.delete(a),e.current.delete(a),d.current.filtered.items.delete(a);let b=W();I(4,()=>{U(),(null==b?void 0:b.getAttribute("id"))===a&&T(),J.emit()})}),group:a=>(f.current.has(a)||f.current.set(a,new Set),()=>{g.current.delete(a),f.current.delete(a)}),filter:()=>i.current.shouldFilter,label:j||a["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:E,inputId:G,labelId:F,listInnerRef:H}),[]);function O(a,b){var c,e;let f=null!=(e=null==(c=i.current)?void 0:c.filter)?e:y;return a?f(a,d.current.search,b):0}function S(){if(!d.current.search||!1===i.current.shouldFilter)return;let a=d.current.filtered.items,b=[];d.current.filtered.groups.forEach(c=>{let d=f.current.get(c),e=0;d.forEach(b=>{e=Math.max(a.get(b),e)}),b.push([c,e])});let c=H.current;X().sort((b,c)=>{var d,e;let f=b.getAttribute("id"),g=c.getAttribute("id");return(null!=(d=a.get(g))?d:0)-(null!=(e=a.get(f))?e:0)}).forEach(a=>{let b=a.closest(t);b?b.appendChild(a.parentElement===b?a:a.closest(`${t} > *`)):c.appendChild(a.parentElement===c?a:a.closest(`${t} > *`))}),b.sort((a,b)=>b[1]-a[1]).forEach(a=>{var b;let c=null==(b=H.current)?void 0:b.querySelector(`${s}[${x}="${encodeURIComponent(a[0])}"]`);null==c||c.parentElement.appendChild(c)})}function T(){let a=X().find(a=>"true"!==a.getAttribute("aria-disabled")),b=null==a?void 0:a.getAttribute(x);J.setState("value",b||void 0)}function U(){var a,b,c,h;if(!d.current.search||!1===i.current.shouldFilter){d.current.filtered.count=e.current.size;return}d.current.filtered.groups=new Set;let j=0;for(let f of e.current){let e=O(null!=(b=null==(a=g.current.get(f))?void 0:a.value)?b:"",null!=(h=null==(c=g.current.get(f))?void 0:c.keywords)?h:[]);d.current.filtered.items.set(f,e),e>0&&j++}for(let[a,b]of f.current)for(let c of b)if(d.current.filtered.items.get(c)>0){d.current.filtered.groups.add(a);break}d.current.filtered.count=j}function V(){var a,b,c;let d=W();d&&((null==(a=d.parentElement)?void 0:a.firstChild)===d&&(null==(c=null==(b=d.closest(s))?void 0:b.querySelector('[cmdk-group-heading=""]'))||c.scrollIntoView({block:"nearest"})),d.scrollIntoView({block:"nearest"}))}function W(){var a;return null==(a=H.current)?void 0:a.querySelector(`${u}[aria-selected="true"]`)}function X(){var a;return Array.from((null==(a=H.current)?void 0:a.querySelectorAll(v))||[])}function Y(a){let b=X()[a];b&&J.setState("value",b.getAttribute(x))}function Z(a){var b;let c=W(),d=X(),e=d.findIndex(a=>a===c),f=d[e+a];null!=(b=i.current)&&b.loop&&(f=e+a<0?d[d.length-1]:e+a===d.length?d[0]:d[e+a]),f&&J.setState("value",f.getAttribute(x))}function $(a){let b=W(),c=null==b?void 0:b.closest(s),d;for(;c&&!d;)d=null==(c=a>0?function(a,b){let c=a.nextElementSibling;for(;c;){if(c.matches(b))return c;c=c.nextElementSibling}}(c,s):function(a,b){let c=a.previousElementSibling;for(;c;){if(c.matches(b))return c;c=c.previousElementSibling}}(c,s))?void 0:c.querySelector(v);d?J.setState("value",d.getAttribute(x)):Z(a)}let _=()=>Y(X().length-1),aa=a=>{a.preventDefault(),a.metaKey?_():a.altKey?$(1):Z(1)},ab=a=>{a.preventDefault(),a.metaKey?Y(0):a.altKey?$(-1):Z(-1)};return c.createElement(p.Primitive.div,{ref:b,tabIndex:-1,...D,"cmdk-root":"",onKeyDown:a=>{var b;null==(b=D.onKeyDown)||b.call(D,a);let c=a.nativeEvent.isComposing||229===a.keyCode;if(!(a.defaultPrevented||c))switch(a.key){case"n":case"j":C&&a.ctrlKey&&aa(a);break;case"ArrowDown":aa(a);break;case"p":case"k":C&&a.ctrlKey&&ab(a);break;case"ArrowUp":ab(a);break;case"Home":a.preventDefault(),Y(0);break;case"End":a.preventDefault(),_();break;case"Enter":{a.preventDefault();let b=W();if(b){let a=new Event(w);b.dispatchEvent(a)}}}}},c.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:R},j),Q(a,a=>c.createElement(A.Provider,{value:J},c.createElement(z.Provider,{value:N},a))))}),D=c.forwardRef((a,b)=>{var d,e;let f=(0,q.useId)(),g=c.useRef(null),h=c.useContext(B),i=c.useContext(z),j=K(a),k=null!=(e=null==(d=j.current)?void 0:d.forceMount)?e:null==h?void 0:h.forceMount;L(()=>{if(!k)return i.item(f,null==h?void 0:h.id)},[k]);let l=O(f,g,[a.value,a.children,g],a.keywords),m=c.useContext(A),n=N(a=>a.value&&a.value===l.current),o=N(a=>!!k||!1===i.filter()||!a.search||a.filtered.items.get(f)>0);function s(){var a,b;t(),null==(b=(a=j.current).onSelect)||b.call(a,l.current)}function t(){m.setState("value",l.current,!0)}if(c.useEffect(()=>{let b=g.current;if(!(!b||a.disabled))return b.addEventListener(w,s),()=>b.removeEventListener(w,s)},[o,a.onSelect,a.disabled]),!o)return null;let{disabled:u,value:v,onSelect:x,forceMount:y,keywords:C,...D}=a;return c.createElement(p.Primitive.div,{ref:(0,r.composeRefs)(g,b),...D,id:f,"cmdk-item":"",role:"option","aria-disabled":!!u,"aria-selected":!!n,"data-disabled":!!u,"data-selected":!!n,onPointerMove:u||i.getDisablePointerSelection()?void 0:t,onClick:u?void 0:s},a.children)}),E=c.forwardRef((a,b)=>{let{heading:d,children:e,forceMount:f,...g}=a,h=(0,q.useId)(),i=c.useRef(null),j=c.useRef(null),k=(0,q.useId)(),l=c.useContext(z),m=N(a=>!!f||!1===l.filter()||!a.search||a.filtered.groups.has(h));L(()=>l.group(h),[]),O(h,i,[a.value,a.heading,j]);let n=c.useMemo(()=>({id:h,forceMount:f}),[f]);return c.createElement(p.Primitive.div,{ref:(0,r.composeRefs)(i,b),...g,"cmdk-group":"",role:"presentation",hidden:!m||void 0},d&&c.createElement("div",{ref:j,"cmdk-group-heading":"","aria-hidden":!0,id:k},d),Q(a,a=>c.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":d?k:void 0},c.createElement(B.Provider,{value:n},a))))}),F=c.forwardRef((a,b)=>{let{alwaysRender:d,...e}=a,f=c.useRef(null),g=N(a=>!a.search);return d||g?c.createElement(p.Primitive.div,{ref:(0,r.composeRefs)(f,b),...e,"cmdk-separator":"",role:"separator"}):null}),G=c.forwardRef((a,b)=>{let{onValueChange:d,...e}=a,f=null!=a.value,g=c.useContext(A),h=N(a=>a.search),i=N(a=>a.selectedItemId),j=c.useContext(z);return c.useEffect(()=>{null!=a.value&&g.setState("search",a.value)},[a.value]),c.createElement(p.Primitive.input,{ref:b,...e,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":j.listId,"aria-labelledby":j.labelId,"aria-activedescendant":i,id:j.inputId,type:"text",value:f?a.value:h,onChange:a=>{f||g.setState("search",a.target.value),null==d||d(a.target.value)}})}),H=c.forwardRef((a,b)=>{let{children:d,label:e="Suggestions",...f}=a,g=c.useRef(null),h=c.useRef(null),i=N(a=>a.selectedItemId),j=c.useContext(z);return c.useEffect(()=>{if(h.current&&g.current){let a=h.current,b=g.current,c,d=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let c=a.offsetHeight;b.style.setProperty("--cmdk-list-height",c.toFixed(1)+"px")})});return d.observe(a),()=>{cancelAnimationFrame(c),d.unobserve(a)}}},[]),c.createElement(p.Primitive.div,{ref:(0,r.composeRefs)(g,b),...f,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":e,id:j.listId},Q(a,a=>c.createElement("div",{ref:(0,r.composeRefs)(h,j.listInnerRef),"cmdk-list-sizer":""},a)))}),I=c.forwardRef((a,b)=>{let{open:d,onOpenChange:e,overlayClassName:f,contentClassName:g,container:h,...i}=a;return c.createElement(o.Root,{open:d,onOpenChange:e},c.createElement(o.Portal,{container:h},c.createElement(o.Overlay,{"cmdk-overlay":"",className:f}),c.createElement(o.Content,{"aria-label":a.label,"cmdk-dialog":"",className:g},c.createElement(C,{ref:b,...i}))))}),J=Object.assign(C,{List:H,Item:D,Input:G,Group:E,Separator:F,Dialog:I,Empty:c.forwardRef((a,b)=>N(a=>0===a.filtered.count)?c.createElement(p.Primitive.div,{ref:b,...a,"cmdk-empty":"",role:"presentation"}):null),Loading:c.forwardRef((a,b)=>{let{progress:d,children:e,label:f="Loading...",...g}=a;return c.createElement(p.Primitive.div,{ref:b,...g,"cmdk-loading":"",role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100,"aria-label":f},Q(a,a=>c.createElement("div",{"aria-hidden":!0},a)))})});function K(a){let b=c.useRef(a);return L(()=>{b.current=a}),b}var L=c.useEffect;function M(a){let b=c.useRef();return void 0===b.current&&(b.current=a()),b}function N(a){let b=c.useContext(A),d=()=>a(b.snapshot());return c.useSyncExternalStore(b.subscribe,d,d)}function O(a,b,d,e=[]){let f=c.useRef(),g=c.useContext(z);return L(()=>{var c;let h=(()=>{var a;for(let b of d){if("string"==typeof b)return b.trim();if("object"==typeof b&&"current"in b)return b.current?null==(a=b.current.textContent)?void 0:a.trim():f.current}})(),i=e.map(a=>a.trim());g.value(a,h,i),null==(c=b.current)||c.setAttribute(x,h),f.current=h}),f}var P=()=>{let[a,b]=c.useState(),d=M(()=>new Map);return L(()=>{d.current.forEach(a=>a()),d.current=new Map},[a]),(a,c)=>{d.current.set(a,c),b({})}};function Q({asChild:a,children:b},d){let e;return a&&c.isValidElement(b)?c.cloneElement("function"==typeof(e=b.type)?e(b.props):"render"in e?e.render(b.props):b,{ref:b.ref},d(b.props.children)):d(b)}var R={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},S=a.i(75797),S=S;function T({className:a,...c}){return(0,b.jsx)(J,{"data-slot":"command",className:(0,h.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",a),...c})}function U({className:a,...c}){return(0,b.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,b.jsx)(S.default,{className:"size-4 shrink-0 opacity-50"}),(0,b.jsx)(J.Input,{"data-slot":"command-input",className:(0,h.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",a),...c})]})}function V({className:a,...c}){return(0,b.jsx)(J.List,{"data-slot":"command-list",className:(0,h.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",a),...c})}function W({...a}){return(0,b.jsx)(J.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...a})}function X({className:a,...c}){return(0,b.jsx)(J.Group,{"data-slot":"command-group",className:(0,h.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",a),...c})}function Y({className:a,...c}){return(0,b.jsx)(J.Item,{"data-slot":"command-item",className:(0,h.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}a.i(14574);var Z=a.i(99209),$=a.i(60721);function _({onSelect:a,placeholder:j="Search accounts...",className:k}){let[l,m]=c.useState(!1),[n,o]=c.useState(""),[p,q]=c.useState([]),[r,s]=c.useState(!1),[t,u]=c.useState(null);return c.useEffect(()=>{if(n.length<2)return void q([]);let a=setTimeout(async()=>{s(!0);try{let a=await (0,$.apiClient)(`/banker/accounts/search?q=${encodeURIComponent(n)}`);if(a.success&&a.data){let b=a.data;q(b.accounts||[])}}catch(a){console.error("Search failed",a),q([])}finally{s(!1)}},300);return()=>clearTimeout(a)},[n]),(0,b.jsxs)(Z.Popover,{open:l,onOpenChange:m,children:[(0,b.jsx)(Z.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",role:"combobox","aria-expanded":l,className:(0,h.cn)("w-full justify-between h-14 text-lg px-4",k),children:[t?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-left w-full overflow-hidden",children:[(0,b.jsx)("span",{className:"font-bold font-mono",children:t.accountNumber}),(0,b.jsx)("span",{className:"text-muted-foreground truncate flex-1 pl-2 border-l ml-2",children:t.customerName}),(0,b.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 text-slate-700 font-medium",children:["৳",t.availableBalance.toLocaleString()]})]}):(0,b.jsxs)("div",{className:"flex items-center text-muted-foreground w-full",children:[(0,b.jsx)(g.Search,{className:"mr-2 h-5 w-5 opacity-50"}),j]}),(0,b.jsx)(e,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,b.jsx)(Z.PopoverContent,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,b.jsxs)(T,{shouldFilter:!1,children:[(0,b.jsx)(U,{placeholder:"Search by account number or name...",value:n,onValueChange:o,className:"h-12"}),(0,b.jsxs)(V,{children:[r&&(0,b.jsxs)("div",{className:"py-6 text-center text-sm text-muted-foreground flex items-center justify-center gap-2",children:[(0,b.jsx)(f.Loader2,{className:"h-4 w-4 animate-spin"}),"Searching..."]}),!r&&n.length>=2&&0===p.length&&(0,b.jsx)(W,{className:"py-6 text-center text-sm text-muted-foreground",children:"No accounts found."}),!r&&n.length<2&&0===p.length&&(0,b.jsxs)("div",{className:"py-8 text-center text-sm text-muted-foreground px-4",children:[(0,b.jsx)("p",{children:"Type at least 2 characters to search."}),(0,b.jsx)("p",{className:"text-xs mt-1 opacity-70",children:"Search by Account Number, Name or Customer ID."})]}),(0,b.jsx)(X,{children:p.map(c=>(0,b.jsxs)(Y,{value:c.accountNumber,onSelect:()=>{u(c),a(c),m(!1)},className:"p-3 cursor-pointer",children:[(0,b.jsx)(d.Check,{className:(0,h.cn)("mr-2 h-4 w-4",t?.id===c.id?"opacity-100":"opacity-0")}),(0,b.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,b.jsx)("span",{className:"font-bold font-mono text-base",children:c.accountNumber}),(0,b.jsx)("span",{className:(0,h.cn)("text-xs px-2 py-0.5 rounded-full font-medium","ACTIVE"===c.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:c.status})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm w-full",children:[(0,b.jsx)("span",{className:"text-muted-foreground truncate max-w-[180px]",children:c.customerName}),(0,b.jsxs)("span",{className:"font-semibold text-slate-700",children:["৳",c.availableBalance.toLocaleString()]})]})]})]},c.id))})]})]})})]})}a.s(["AccountSearch",()=>_],93360)}];

//# sourceMappingURL=src_components_banker_AccountSearch_tsx_8c1fa22f._.js.map