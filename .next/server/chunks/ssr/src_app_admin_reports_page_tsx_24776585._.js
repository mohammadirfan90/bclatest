module.exports=[91245,a=>{"use strict";var b=a.i(69426),c=a.i(35843),d=a.i(73608),e=a.i(85206),f=a.i(91119),g=a.i(99570),h=a.i(70430),i=a.i(66718),j=a.i(86304),k=a.i(80701),l=a.i(6015),m=a.i(2507),n=a.i(11074),o=a.i(72873);let p=(0,o.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var q=a.i(44110),r=a.i(57005),s=a.i(74549),t=a.i(99756);let u=(0,o.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var v=a.i(60721);let w=[{id:"transactions",name:"Transaction Summary",description:"Daily transaction summary report"},{id:"balances",name:"Account Balances",description:"Current account balance snapshot"},{id:"ledger",name:"General Ledger",description:"Double-entry ledger report"},{id:"customers",name:"Customer Report",description:"Customer onboarding and status"},{id:"audit",name:"Audit Trail",description:"System activity and changes"}];function x(){let[a,o]=(0,c.useState)(()=>{let a=new Date;return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`}),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)({}),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),J=a=>new Intl.NumberFormat("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),K=a=>new Intl.NumberFormat("en-BD").format(a),L=async()=>{E(!0);try{let[b,c]=a.split("-").map(Number),d=await (0,v.apiClient)(`/reports/monthly-summary?year=${b}&month=${c}&size=10`);d.success&&d.data&&(y(d.data.summary),C(d.data.data));let e=await (0,v.apiClient)(`/reports/top-accounts?month=${a}`);e.success&&e.data&&A(e.data.data)}catch(a){console.error("Failed to load analytics:",a)}finally{E(!1)}};(0,c.useEffect)(()=>{L()},[a]);let M=async()=>{G(!0),I(null);try{let a=await (0,v.apiClient)("/admin/reports/rebuild",{method:"POST"});a.success&&a.data?(I(`Rebuild complete: ${a.data.data.dailyRowsGenerated} daily rows, ${a.data.data.monthlyRowsGenerated} monthly rows`),await L()):I("Rebuild failed. Check console for details.")}catch(a){console.error("Rebuild failed:",a),I("Rebuild failed. Check console for details.")}finally{G(!1)}},N=Array.from({length:12},(a,b)=>{let c=(0,e.subMonths)(new Date,b);return{value:`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`,label:(0,d.format)(c,"MMMM yyyy")}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Analytics & Reports"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Financial analytics and management reports"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(k.Select,{value:a,onValueChange:o,children:[(0,b.jsxs)(k.SelectTrigger,{className:"w-48",children:[(0,b.jsx)(t.Calendar,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(k.SelectValue,{})]}),(0,b.jsx)(k.SelectContent,{children:N.map(a=>(0,b.jsx)(k.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:M,disabled:F,children:[(0,b.jsx)(r.RefreshCw,{className:`mr-2 h-4 w-4 ${F?"animate-spin":""}`}),F?"Rebuilding...":"Rebuild Analytics"]})]})]}),H&&(0,b.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-700 text-sm",children:H}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Total Volume"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:D?"...":J(x?.totalVolume||0)})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-200/50 flex items-center justify-center",children:(0,b.jsx)(q.BarChart3,{className:"h-6 w-6 text-blue-600"})})]})})}),(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 border-emerald-200",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-emerald-600 font-medium",children:"Total Deposits"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-800",children:D?"...":J(x?.totalDeposits||0)})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-emerald-200/50 flex items-center justify-center",children:(0,b.jsx)(m.TrendingUp,{className:"h-6 w-6 text-emerald-600"})})]})})}),(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-rose-50 to-rose-100 border-rose-200",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-rose-600 font-medium",children:"Total Withdrawals"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-rose-800",children:D?"...":J(x?.totalWithdrawals||0)})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-rose-200/50 flex items-center justify-center",children:(0,b.jsx)(n.TrendingDown,{className:"h-6 w-6 text-rose-600"})})]})})}),(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-violet-50 to-violet-100 border-violet-200",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-violet-600 font-medium",children:"Transactions"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-violet-800",children:D?"...":K(x?.totalTransactions||0)})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-violet-200/50 flex items-center justify-center",children:(0,b.jsx)(p,{className:"h-6 w-6 text-violet-600"})})]})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:D?"...":K(x?.totalAccounts||0)}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Total Accounts"})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:D?"...":K(x?.totalActiveAccounts||0)}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Active Accounts"})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-slate-800",children:D?"...":J(x?.avgAccountBalance||0)}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Avg Account Balance"})]})})})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(u,{className:"h-5 w-5 text-amber-500"}),"Top Balances"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(z.HIGHEST_BALANCE||[]).slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Badge,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center text-xs",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.customerName}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.accountNumber})]})]}),(0,b.jsx)("p",{className:"font-medium text-emerald-600",children:J(a.metricValue)})]},a.accountId)),(!z.HIGHEST_BALANCE||0===z.HIGHEST_BALANCE.length)&&(0,b.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"No data available"})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(q.BarChart3,{className:"h-5 w-5 text-blue-500"}),"Most Active"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(z.MOST_TRANSACTIONS||[]).slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Badge,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center text-xs",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.customerName}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.accountNumber})]})]}),(0,b.jsxs)("p",{className:"font-medium text-blue-600",children:[K(a.metricValue)," txns"]})]},a.accountId)),(!z.MOST_TRANSACTIONS||0===z.MOST_TRANSACTIONS.length)&&(0,b.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"No data available"})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(m.TrendingUp,{className:"h-5 w-5 text-violet-500"}),"Highest Volume"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(z.HIGHEST_VOLUME||[]).slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Badge,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center text-xs",children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.customerName}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.accountNumber})]})]}),(0,b.jsx)("p",{className:"font-medium text-violet-600",children:J(a.metricValue)})]},a.accountId)),(!z.HIGHEST_VOLUME||0===z.HIGHEST_VOLUME.length)&&(0,b.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"No data available"})]})})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Account Summaries"}),(0,b.jsxs)(f.CardDescription,{children:["Top accounts by balance for ",(0,d.format)(new Date(a+"-01"),"MMMM yyyy")]})]}),(0,b.jsx)(f.CardContent,{className:"p-0",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{className:"bg-slate-50",children:[(0,b.jsx)(l.TableHead,{children:"Account"}),(0,b.jsx)(l.TableHead,{children:"Customer"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Closing Balance"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Credits"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Debits"})]})}),(0,b.jsx)(l.TableBody,{children:D?(0,b.jsx)(l.TableRow,{children:(0,b.jsx)(l.TableCell,{colSpan:5,className:"text-center py-8 text-slate-500",children:"Loading..."})}):0===B.length?(0,b.jsx)(l.TableRow,{children:(0,b.jsx)(l.TableCell,{colSpan:5,className:"text-center py-8 text-slate-500",children:"No data for this period. Try running EOD processing or rebuilding analytics."})}):B.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{className:"font-mono text-sm",children:a.accountNumber}),(0,b.jsx)(l.TableCell,{children:a.customerName}),(0,b.jsx)(l.TableCell,{className:"text-right font-medium",children:J(a.closingBalance)}),(0,b.jsx)(l.TableCell,{className:"text-right text-emerald-600",children:J(a.totalCredits)}),(0,b.jsx)(l.TableCell,{className:"text-right text-rose-600",children:J(a.totalDebits)})]},a.id))})]})})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Generate Report"}),(0,b.jsx)(f.CardDescription,{children:"Select report type and date range"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Report Type"}),(0,b.jsxs)(k.Select,{children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select report type"})}),(0,b.jsx)(k.SelectContent,{children:w.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Start Date"}),(0,b.jsx)(i.Input,{type:"date"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"End Date"}),(0,b.jsx)(i.Input,{type:"date"})]})]}),(0,b.jsxs)(g.Button,{className:"w-full",children:[(0,b.jsx)(s.Download,{className:"mr-2 h-4 w-4"}),"Generate Report"]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Available Reports"}),(0,b.jsx)(f.CardDescription,{children:"Report types and descriptions"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:w.map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.description})]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",children:"Quick"})]},a.id))})})]})]})]})}a.s(["default",()=>x],91245)}];

//# sourceMappingURL=src_app_admin_reports_page_tsx_24776585._.js.map