{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.1.1_%40babel%2Bcore%407.2_cd686fafa065e16de73e229f5879b04d/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../src/app/customer/layout.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","'use client';\n\nimport { ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth-context';\nimport { Sidebar, Icons } from '@/components/layouts/Sidebar';\n\nconst customerNavItems = [\n    { title: 'Dashboard', href: '/customer/dashboard', icon: Icons.dashboard },\n    { title: 'Accounts', href: '/customer/accounts', icon: Icons.accounts },\n    { title: 'Transfers', href: '/customer/transfers', icon: Icons.transfers },\n    { title: 'Statements', href: '/customer/statements', icon: Icons.transactions },\n    { title: 'My Profile', href: '/customer/profile', icon: Icons.users },\n];\n\nexport default function CustomerLayout({ children }: { children: ReactNode }) {\n    const { isAuthenticated, isLoading, userType, user } = useAuth();\n    const router = useRouter();\n\n    // Redirect if not authenticated or wrong user type\n    if (!isLoading) {\n        if (!isAuthenticated || userType !== 'customer') {\n            router.push('/login');\n            return null;\n        }\n\n        const isVerified = user?.kycStatus === 'VERIFIED';\n        const isPendingPage = typeof window !== 'undefined' && window.location.pathname === '/customer/verification-pending';\n\n        // Enforce KYC\n        if (!isVerified) {\n            if (!isPendingPage) {\n                router.push('/customer/verification-pending');\n                return null;\n            }\n        } else {\n            // If verified but trying to access pending page, go to dashboard\n            if (isPendingPage) {\n                router.push('/customer/dashboard');\n                return null;\n            }\n        }\n    }\n\n    if (isLoading) {\n        return (\n            <div className=\"flex h-screen items-center justify-center\">\n                <div className=\"animate-spin h-8 w-8 border-4 border-slate-900 border-t-transparent rounded-full\" />\n            </div>\n        );\n    }\n\n    // If not verified, only show simple layout (no sidebar) or just the children (which is the pending page)\n    if (user?.kycStatus !== 'VERIFIED') {\n        return <main className=\"min-h-screen bg-slate-50\">{children}</main>;\n    }\n\n    return (\n        <div className=\"flex h-screen bg-white\">\n            <Sidebar navItems={customerNavItems} title=\"Banking Core\" subtitle=\"Customer Portal\" />\n            <main className=\"flex-1 overflow-auto\">\n                <div className=\"p-6\">{children}</div>\n            </main>\n        </div>\n    );\n}\n"],"names":["module","exports","require","vendored","ReactServerDOMTurbopackClient"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,6BAA6B,0CCCtD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAmB,CACrB,CAAE,MAAO,YAAa,KAAM,sBAAuB,KAAM,EAAA,KAAK,CAAC,SAAS,AAAC,EACzE,CAAE,MAAO,WAAY,KAAM,qBAAsB,KAAM,EAAA,KAAK,CAAC,QAAQ,AAAC,EACtE,CAAE,MAAO,YAAa,KAAM,sBAAuB,KAAM,EAAA,KAAK,CAAC,SAAS,AAAC,EACzE,CAAE,MAAO,aAAc,KAAM,uBAAwB,KAAM,EAAA,KAAK,CAAC,YAAa,AAAD,EAC7E,CAAE,MAAO,aAAc,KAAM,oBAAqB,KAAM,EAAA,KAAK,CAAC,KAAK,AAAC,EACvE,CAEc,SAAS,EAAe,UAAE,CAAQ,CAA2B,EACxE,GAAM,iBAAE,CAAe,CAAE,WAAS,UAAE,CAAQ,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IACxD,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAGxB,GAAI,CAAC,EAAW,CACZ,GAAI,CAAC,GAAmB,AAAa,YAAY,GAE7C,OADA,EAAO,IAAI,CAAC,UACL,KAOX,GAJmB,CAIf,CAAC,CAJoB,WAIR,CAJsB,WAO/B,OADA,EAAO,IAAI,CAAC,kCACL,IASnB,QAEA,AAAI,EAEI,CAAA,EAAA,EAAA,GAAA,CAFO,CAEN,MAAA,CAAI,UAAU,qDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uFAMvB,GAAM,YAAc,WACb,CADyB,AACzB,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oCAA4B,IAInD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,SAAU,EAAkB,MAAM,eAAe,SAAS,oBACnE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eAAO,QAItC","ignoreList":[0]}